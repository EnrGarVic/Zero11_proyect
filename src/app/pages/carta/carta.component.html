<div class="container my-5">
  <h1 class="text-center mb-4">Nuestra Carta</h1>

  <div class="row">
    <div class="col-md-6 mb-4" *ngFor="let categoria of categorias">
      <div class="card h-100">
        <div class="card-body">
          <h4 class="card-title text-center text-uppercase fw-bold">
            {{ categoria.nombre }}
          </h4>
          <ul class="list-unstyled mt-3">
            <li *ngFor="let producto of categoria.productos">
              <div class="d-flex justify-content-between">
                <span>{{ producto.nombre }}</span>
                <span class="fw-bold">
                  {{ producto.precio }} 
                  <ng-container *ngIf="isAdmin">
                    <button
                      class="btn btn-danger btn-sm ms-2"
                      (click)="eliminarProducto(producto.id)"
                    >
                      Eliminar
                    </button>
                    <button
                    class="btn btn-primary btn-sm ms-2"
                    (click)="seleccionarProducto(producto)"
                  >
                    Editar
                  </button>
                  </ng-container>
                </span>
              </div>

              <div *ngIf="productoSeleccionado?.id === producto.id" class="mt-3">
                <form (ngSubmit)="guardarCambios()">
                  <div class="mb-2">
                    <input
                      [(ngModel)]="productoSeleccionado.nombre"
                      name="nombre"
                      class="form-control"
                      placeholder="Nombre"
                      required
                    />
                  </div>
                  <div class="mb-2">
                    <input
                      [(ngModel)]="productoSeleccionado.precio"
                      name="precio"
                      type="number"
                      class="form-control"
                      placeholder="Precio"
                      required
                    />
                  </div>
                  <div class="d-flex justify-content-end">
                    <button type="submit" class="btn btn-danger btn-sm me-2">
                      Guardar
                    </button>
                    <button type="button" class="btn btn-secondary btn-sm" (click)="cancelarEdicion()">
                      Cancelar
                    </button>
                  </div>
                </form>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
